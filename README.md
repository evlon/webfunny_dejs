# webfunny_dejs

è¿è¡Œæ—¶å‡½æ•°è§£å¯†å·¥å…· - ç”¨äºåˆ†æå’Œè§£å¯†JavaScriptä»£ç ä¸­çš„æ··æ·†å‡½æ•°

## åŠŸèƒ½æ¦‚è¿°

`de.js` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„JavaScriptä»£ç åˆ†æå·¥å…·ï¼Œä¸“é—¨ç”¨äºï¼š

- ğŸ” **ASTä»£ç åˆ†æ** - ä½¿ç”¨Babelè§£æå™¨æ·±åº¦åˆ†æJavaScriptæŠ½è±¡è¯­æ³•æ ‘
- ğŸ¯ **å‡½æ•°æå–** - è‡ªåŠ¨è¯†åˆ«å’Œæå–ç¬¦åˆç‰¹å®šæ¨¡å¼çš„æ··æ·†å‡½æ•°
- ğŸ’¡ **å¸¸é‡åˆ†æ** - æ‰¾å‡ºä½¿ç”¨å¸¸é‡å‚æ•°è°ƒç”¨çš„å‡½æ•°è°ƒç”¨
- ğŸ”„ **è¿è¡Œæ—¶è§£å¯†** - åœ¨éš”ç¦»VMç¯å¢ƒä¸­æ‰§è¡Œå‡½æ•°ï¼Œè·å–å®é™…è¿”å›å€¼
- âœ‚ï¸ **ä»£ç ç®€åŒ–** - å°†å‡½æ•°è°ƒç”¨æ›¿æ¢ä¸ºè®¡ç®—åçš„å¸¸é‡å€¼ï¼Œç®€åŒ–ä»£ç é€»è¾‘

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å®‰è£… webcrackï¼ˆå¯é€‰ä½†æ¨èï¼‰

webcrack æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ JavaScript åæ··æ·†å·¥å…·ï¼Œå¯ä»¥ä¸ webfunny_dejs é…åˆä½¿ç”¨ã€‚

```bash
# ä½¿ç”¨ npm å…¨å±€å®‰è£…
npm install -g webcrack

# æˆ–ä½¿ç”¨ npxï¼ˆæ¨èï¼Œæ— éœ€å®‰è£…ï¼‰
npx webcrack your_script.js
```

### ä½¿ç”¨æ–¹æ³•

```bash
# åŸºæœ¬ç”¨æ³•
node de.js -f your_script.js

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶
node de.js -f input.js -o output.js

# å¯ç”¨è¯¦ç»†æ¨¡å¼
node de.js -f input.js -v

# å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼ˆè®°å½•å‡½æ•°è°ƒç”¨è¿‡ç¨‹ï¼‰
node de.js -f input.js -d

# æŒ‡å®šè¦å¤„ç†çš„å‡½æ•°åæ¨¡å¼
node de.js -f input.js --function-name "f\\d+"
```

## å‚æ•°è¯´æ˜

| å‚æ•° | åˆ«å | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `--file` | `-f` | å¾…å¤„ç†çš„æ–‡ä»¶è·¯å¾„ | å¿…éœ€ |
| `--output` | `-o` | è¾“å‡ºæ–‡ä»¶è·¯å¾„ | åŸæ–‡ä»¶è·¯å¾„ |
| `--backup` | `-b` | æ˜¯å¦åˆ›å»ºå¤‡ä»½æ–‡ä»¶ | true |
| `--verbose` | `-v` | è¯¦ç»†è¾“å‡ºæ¨¡å¼ | false |
| `--debug` | `-d` | è°ƒè¯•æ¨¡å¼ï¼Œè®°å½•è¿è¡Œæ—¶å˜é‡çŠ¶æ€ | false |
| `--intercept-pattern` | | å‡½æ•°ååŒ¹é…æ¨¡å¼ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ | `f\\d+` |
| `--function-name` | | æŒ‡å®šè¦è°ƒè¯•çš„å‡½æ•°åç§°ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ | æ‰€æœ‰åŒ¹é… |
| `--min-args` | | æœ€å°å‚æ•°ä¸ªæ•° | 4 |
| `--max-args` | | æœ€å¤§å‚æ•°ä¸ªæ•° | 6 |

## å…¶ä»–å·¥å…·é›†æˆ

### webcrack é›†æˆä½¿ç”¨

webcrack æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ JavaScript åæ··æ·†å·¥å…·ï¼Œå¯ä»¥ä½œä¸º webfunny_dejs çš„å‰ç½®å¤„ç†æ­¥éª¤ï¼Œæ˜¾è‘—æé«˜åæ··æ·†æ•ˆæœã€‚

#### å®‰è£… webcrack

```bash
# ä½¿ç”¨ npm å…¨å±€å®‰è£…
npm install -g webcrack

# æˆ–ä½¿ç”¨ npxï¼ˆæ¨èï¼Œæ— éœ€å®‰è£…ï¼‰
npx webcrack your_script.js
```

#### ä½¿ç”¨ webcrack è¿›è¡Œé¢„å¤„ç†

```bash
# 1. é¦–å…ˆä½¿ç”¨ webcrack è¿›è¡Œåˆæ­¥åæ··æ·†
webcrack input.js -o intermediate.js

# 2. ç„¶åä½¿ç”¨ webfunny_dejs è¿›è¡Œæ·±åº¦åˆ†æ
node de.js -f intermediate.js -o output.js

# æˆ–ä½¿ç”¨å•è¡Œå‘½ä»¤ç»„åˆ
webcrack input.js -o intermediate.js && node de.js -f intermediate.js -o output.js
```

#### webcrack ä¸»è¦åŠŸèƒ½

- ğŸ” **AST è§£æ··æ·†** - è¿˜åŸå‹ç¼©çš„å˜é‡åå’Œå‡½æ•°å
- ğŸ”„ **æ§åˆ¶æµå¹³å¦åŒ–** - è¿˜åŸå¤æ‚çš„æ§åˆ¶æµç»“æ„
- ğŸ’¡ **å¸¸é‡ä¼ æ’­** - è¿˜åŸå¸¸é‡è¡¨è¾¾å¼
- ğŸ§© **å­—ç¬¦ä¸²è§£å¯†** - è§£å¯†åŠ å¯†çš„å­—ç¬¦ä¸²
- ğŸ“Š **ä»£ç ç¾åŒ–** - æ ¼å¼åŒ–ä»£ç ç»“æ„

#### webcrack ä¸ webfunny_dejs é…åˆä½¿ç”¨çš„å·¥ä½œæµç¨‹

```bash
# å®Œæ•´åæ··æ·†æµç¨‹
webcrack encrypted.js -o step1.js                    # åˆæ­¥è§£æ··æ·†
node de.js -f step1.js -o step2.js -v -d             # è¿è¡Œæ—¶å‡½æ•°è§£å¯†
webcrack step2.js -o final.js --beautify            # æœ€ç»ˆç¾åŒ–
```

#### webcrack å¸¸ç”¨å‚æ•°

```bash
# åŸºæœ¬ç”¨æ³•
webcrack input.js -o output.js

# ç¾åŒ–è¾“å‡º
webcrack input.js -o output.js --beautify

# è§£æ··æ·†ç‰¹å®šæ¨¡å¼
webcrack input.js -o output.js --string-array

# è¯¦ç»†æ¨¡å¼
webcrack input.js -o output.js --verbose
```

### å·¥å…·å¯¹æ¯”

| å·¥å…· | ä¸»è¦åŠŸèƒ½ | é€‚ç”¨åœºæ™¯ |
|------|----------|----------|
| **webfunny_dejs** | è¿è¡Œæ—¶å‡½æ•°è§£å¯†ã€å¸¸é‡æ›¿æ¢ã€ä¾èµ–åˆ†æ | å¤„ç†å¤æ‚çš„è¿è¡Œæ—¶åŠ å¯†å‡½æ•° |
| **webcrack** | ASTè§£æ··æ·†ã€æ§åˆ¶æµè¿˜åŸã€å­—ç¬¦ä¸²è§£å¯† | å¤„ç†å‹ç¼©å’Œæ··æ·†çš„ç»“æ„åŒ–ä»£ç  |

## å·¥ä½œåŸç†

### 1. ASTåˆ†æé˜¶æ®µ
å·¥å…·ä½¿ç”¨Babelè§£æå™¨æ„å»ºä»£ç çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œæ·±åº¦åˆ†æå‡½æ•°å®šä¹‰å’Œè°ƒç”¨å…³ç³»ã€‚

### 2. å‡½æ•°æå–
è¯†åˆ«ç¬¦åˆæ¨¡å¼ï¼ˆå¦‚`f123`, `f456`ç­‰ï¼‰çš„å‡½æ•°å®šä¹‰ï¼Œåˆ†æå…¶ä¾èµ–å…³ç³»ã€‚

### 3. è°ƒç”¨åˆ†æ
æ‰¾å‡ºæ‰€æœ‰ä½¿ç”¨å¸¸é‡å‚æ•°è°ƒç”¨çš„å‡½æ•°ï¼Œè¿‡æ»¤æ‰éå¸¸é‡å‚æ•°è°ƒç”¨ã€‚

### 4. VMæ‰§è¡Œ
åœ¨å®‰å…¨çš„Node.js VMç¯å¢ƒä¸­æ‰§è¡Œæå–çš„å‡½æ•°ï¼Œæ•è·å®é™…è¿”å›å€¼ã€‚

### 5. ä»£ç æ›¿æ¢
å°†æˆåŠŸçš„å‡½æ•°è°ƒç”¨æ›¿æ¢ä¸ºè®¡ç®—åçš„å¸¸é‡å€¼ï¼Œç®€åŒ–ä»£ç é€»è¾‘ã€‚

## é«˜çº§åŠŸèƒ½

### å­—ç¬¦ä¸²ååºè§£å¯†
è‡ªåŠ¨å¤„ç†å­—ç¬¦ä¸²ååºæ“ä½œï¼š
```javascript
// åŸå§‹ä»£ç 
"hello".split("").reverse().join("")

// å¤„ç†å
"olleh"
```

### å‡½æ•°æ¸…ç†
æ”¯æŒæ¸…ç†å·²è§£å¯†çš„å‡½æ•°ï¼š
- `none`: ä¸æ¸…ç†
- `comment`: æ³¨é‡Šæ‰å‡½æ•°
- `remove`: åˆ é™¤å‡½æ•°

### è°ƒè¯•æ”¯æŒ
å¯ç”¨è°ƒè¯•æ¨¡å¼åå¯ï¼š
- è®°å½•å‡½æ•°è°ƒç”¨è¿‡ç¨‹
- ä¿å­˜è°ƒè¯•æ—¥å¿—åˆ°æ–‡ä»¶
- åˆ†æå‡½æ•°è°ƒç”¨å·®å¼‚

## ç¤ºä¾‹

### è¾“å…¥ä»£ç 
```javascript
function f123(a, b, c, d) {
    return a + b + c + d;
}

// è°ƒç”¨
var result = f123(1, 2, 3, 4);
```

### å¤„ç†åä»£ç 
```javascript
// å‡½æ•°å®šä¹‰è¢«æ¸…ç†ï¼ˆå¯é€‰ï¼‰
/* [è§£å¯†æ¸…ç†] å·²è§£å¯†çš„å‡½æ•°: f123 */

// è°ƒç”¨è¢«æ›¿æ¢ä¸ºå®é™…å€¼
var result = 10;
```

## åº”ç”¨åœºæ™¯

- ğŸ”’ **ä»£ç åæ··æ·†** - åˆ†æè¢«æ··æ·†çš„JavaScriptä»£ç 
- ğŸ“Š **æ€§èƒ½ä¼˜åŒ–** - å°†è¿è¡Œæ—¶è®¡ç®—æ›¿æ¢ä¸ºç¼–è¯‘æ—¶å¸¸é‡
- ğŸ•µï¸ **å®‰å…¨å®¡è®¡** - åˆ†ææ¶æ„ä»£ç çš„è¡Œä¸ºé€»è¾‘
- ğŸ§ª **ä»£ç åˆ†æ** - ç†è§£å¤æ‚ä»£ç çš„æ‰§è¡Œæµç¨‹

## æŠ€æœ¯æ ˆ

- **Node.js** - è¿è¡Œæ—¶ç¯å¢ƒ
- **Babel Parser** - JavaScriptè¯­æ³•åˆ†æ
- **Babel Traverse** - ASTéå†
- **Babel Generator** - ä»£ç ç”Ÿæˆ
- **yargs** - å‘½ä»¤è¡Œå‚æ•°è§£æ

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦è§ LICENSE æ–‡ä»¶ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªå·¥å…·ã€‚